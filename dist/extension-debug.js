function logWithTimestamp(e,t,a){const o=new Date,i=`[${`${o.getHours().toString().padStart(2,"0")}:${o.getMinutes().toString().padStart(2,"0")}:${o.getSeconds().toString().padStart(2,"0")}.${o.getMilliseconds().toString().padStart(3,"0")}`}] [${e}] ${t}`;void 0!==a?console.log(i,a):console.log(i)}const originalAddEventListener=window.addEventListener;window.addEventListener=function(e,t,a){if("squarehero_auth"===e){logWithTimestamp("DEBUG","Adding squarehero_auth event listener");const o=function(e){return logWithTimestamp("DEBUG","squarehero_auth event fired:",e.detail),t.apply(this,arguments)};return originalAddEventListener.call(this,e,o,a)}return originalAddEventListener.call(this,e,t,a)};const originalRequestFunc=window.requestSquareHeroAuth;window.requestSquareHeroAuth=function(){if(logWithTimestamp("DEBUG","requestSquareHeroAuth called"),originalRequestFunc)return originalRequestFunc.apply(this,arguments);logWithTimestamp("DEBUG","No original requestSquareHeroAuth function found")};let _dashboardReadyForAuthValue=window.dashboardReadyForAuth;Object.defineProperty(window,"dashboardReadyForAuth",{get:function(){return _dashboardReadyForAuthValue},set:function(e){return logWithTimestamp("DEBUG",`dashboardReadyForAuth changed to: ${e}`),_dashboardReadyForAuthValue=e,e}}),window.debugDispatchAuthEvent=function(e=!0,t="test@example.com",a="test-uid-123"){logWithTimestamp("DEBUG",`Manually dispatching squarehero_auth event: authenticated=${e}`);const o={authenticated:e,source:"extension",timestamp:(new Date).getTime()};return e&&(o.uid=a,o.email=t),window.dispatchEvent(new CustomEvent("squarehero_auth",{detail:o})),"Event dispatched: "+(e?"login":"logout")},logWithTimestamp("DEBUG",`Current dashboardReadyForAuth: ${window.dashboardReadyForAuth}`),logWithTimestamp("DEBUG",`requestSquareHeroAuth exists: ${!!window.requestSquareHeroAuth}`),logWithTimestamp("DEBUG","Local storage auth data:",{token:localStorage.getItem("squarehero_auth_token"),email:localStorage.getItem("squarehero_auth_email"),source:localStorage.getItem("squarehero_auth_source")}),logWithTimestamp("DEBUG","Extension communication debug script loaded");