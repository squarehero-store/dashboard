const path=require("path"),TerserPlugin=require("terser-webpack-plugin"),MiniCssExtractPlugin=require("mini-css-extract-plugin"),CopyPlugin=require("copy-webpack-plugin"),isProduction="production"===process.env.NODE_ENV;module.exports={mode:isProduction?"production":"development",entry:{"squarehero-dashboard-bundle":["./src/injector.js","./src/dashboard.js"]},output:{path:path.resolve(__dirname,"dist"),filename:"[name].js",publicPath:isProduction?"https://cdn.jsdelivr.net/gh/squarehero-store/dashboard@latest/":"",clean:!0},experiments:{outputModule:!1},externalsType:"global",externals:{"https://www.gstatic.com/firebasejs/11.5.0/firebase-auth.js":"firebase","https://www.gstatic.com/firebasejs/11.5.0/firebase-firestore.js":"firebase"},optimization:{minimize:!0,minimizer:[new TerserPlugin({extractComments:!1,terserOptions:{format:{comments:!1}}})]},module:{rules:[{test:/\.css$/,use:[MiniCssExtractPlugin.loader,"css-loader"]},{test:/\.scss$/,use:[MiniCssExtractPlugin.loader,"css-loader","sass-loader"]},{test:/\.html$/,loader:"html-loader",options:{minimize:!0}},{test:/\.(png|svg|jpg|jpeg|gif)$/i,type:"asset/resource",generator:{filename:"assets/[name][ext]"}},{test:/\.(woff|woff2|eot|ttf|otf)$/i,type:"asset/resource",generator:{filename:"assets/fonts/[name][ext]"}}]},plugins:[new MiniCssExtractPlugin({filename:"squarehero-dashboard-styles.css"}),new CopyPlugin({patterns:[{from:"plugins",to:"plugins",noErrorOnMissing:!0},{from:"*.js",to:"[name][ext]",globOptions:{ignore:["**/node_modules/**","**/dist/**","**/src/**","**/test/**","webpack.config.js","dashboard.js","settings-components.js","skeleton-loader.js","wizard-component.js","help-docs-loader.js","help-docs.css"]}},{from:"assets",to:"assets",noErrorOnMissing:!0}]})],devServer:{static:path.join(__dirname,"dist"),compress:!0,port:9e3,headers:{"Cache-Control":"no-store, no-cache, must-revalidate, proxy-revalidate",Pragma:"no-cache",Expires:"0","Surrogate-Control":"no-store"}}};