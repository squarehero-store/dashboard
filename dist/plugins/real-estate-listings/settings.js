!function(){const e=[{type:"custom",id:"setup-wizard-container",render:function(){const e=document.querySelector(".dashboard-wrapper, body"),t=e&&"false"===e.getAttribute("data-wizard-enabled"),a="true"===localStorage.getItem("disable_wizard");return t||a||!isWizardSetupRequired("real-estate-setup-wizard")?"":'<div id="real-estate-wizard-container"></div>'},bindEvents:function(e){const t=e.querySelector("#real-estate-wizard-container");t&&initRealEstateWizard(t)}},{type:"category",id:"general",label:"General",isDefault:!0,components:[{type:"toggle",id:"enabled",label:"Enable Real Estate Listings Plugin",default:!0},{type:"text",id:"collection-slug",label:"Collection URL Path",default:"find-your-home",helpText:"The URL path of your Squarespace blog collection with property listings"},{type:"text",id:"listing-title",label:"Listings Section Title",width:"half",default:"Properties",placeholder:"Enter title for your listings section",helpText:"This will appear as the main heading for your listings section"},{type:"dropdown",id:"layout",label:"Default Layout",width:"half",options:[{value:"grid",label:"Grid View"},{value:"list",label:"List View"},{value:"map",label:"Map View"}],default:"grid",helpText:"The default view your visitors will see"},{type:"slider",id:"items-per-page",label:"Items Per Page",width:"half",min:3,max:24,step:3,default:9,helpText:"Number of properties to display per page"},{type:"dropdown",id:"grid-columns",label:"Grid Columns",width:"half",options:[{value:"2",label:"2 Columns"},{value:"3",label:"3 Columns"},{value:"4",label:"4 Columns"}],default:"3",helpText:"Number of columns"},{type:"color",id:"price-color",label:"Price Text Color",width:"half",default:"slot5"},{type:"color",id:"status-bg-color",label:"Status Badge Background",width:"half",default:"slot1"}]},{type:"category",id:"properties",label:"Manage Properties",components:[{type:"custom",id:"property-manager",label:"Manage Properties",render:function(){return'<div id="property-manager-container" class="property-manager-wrapper">\n                                    <div class="loading-indicator">Loading property manager...</div>\n                                </div>'},bindEvents:function(e){const t=e.querySelector("#property-manager-container");if(t){const e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("data-module-type","no-module"),e.src="https://cdn.jsdelivr.net/gh/squarehero-store/dashboard@0.2.2/plugins/real-estate-listings/property-manager.js",e.onload=function(){window.PropertyManager&&"function"==typeof window.PropertyManager.initialize?window.PropertyManager.initialize(t.id):t.innerHTML='<div class="error-message">Failed to load property manager.</div>'},e.onerror=function(){t.innerHTML='<div class="error-message">Error loading property manager script.</div>'},document.body.appendChild(e)}}}]},{type:"category",id:"filtering",label:"Filtering",components:[{type:"toggle",id:"show-filters",label:"Enable Filtering",default:!0,helpText:"Allow visitors to filter properties by price, bedrooms, etc."},{type:"checkbox-group",id:"visible-filters",label:"Filter options",options:[{value:"price",label:"Price"},{value:"bedrooms",label:"Bedrooms"},{value:"bathrooms",label:"Bathrooms"},{value:"area",label:"Area (sq ft/m²)"},{value:"status",label:"Property Status"}],default:["price","bedrooms","bathrooms","area","status"],helpText:"Select which filter options to display in the property filter"},{type:"text",id:"categories-label",label:"Categories label",width:"half",default:"Location",helpText:"The label above the categories dropdown in the filter"},{type:"text",id:"tags-label",label:"Tags label",width:"half",default:"Status",helpText:"The label above the tags dropdown in the filter"}]},{type:"category",id:"fields",label:"Fields & Data",components:[{type:"checkbox-group",id:"visible-fields",label:"Property Information to Display",options:[{value:"price",label:"Price"},{value:"bedrooms",label:"Bedrooms"},{value:"bathrooms",label:"Bathrooms"},{value:"area",label:"Area (sq ft/m²)"},{value:"garage",label:"Garage Spaces"},{value:"year",label:"Year Built"},{value:"status",label:"Property Status"}],default:["price","bedrooms","bathrooms","area","status"],helpText:"Select which property details to display in the listing"},{type:"text",id:"currency-symbol",label:"Currency Symbol",width:"half",default:"$",helpText:"Symbol to display before prices"},{type:"dropdown",id:"area-unit",label:"Area Unit",width:"half",options:[{value:"sqft",label:"Square Feet"},{value:"sqm",label:"Square Meters"}],default:"sqft",helpText:"Unit to use for property area"}]}];void 0!==window.PluginRegistry?(window.PluginRegistry.registerSettingsSchema("real-estate-listings",e,{onChange:(e,t)=>{console.log(`Real Estate Listings setting changed: ${e} = ${t}`),"collection-slug"===e&&t&&window.PropertyManager&&window.PropertyManager.propertyDataManager&&window.PropertyManager.propertyDataManager.forceReload()},onSave:e=>{var t;console.log("Real Estate Listings settings saved:",e),t=e,console.log("Applying real estate listings settings:",t),window.PropertyManager&&window.PropertyManager.propertyDataManager&&window.PropertyManager.propertyDataManager.propertyDetails&&window.PluginRegistry&&(window.PluginRegistry.registerPluginData("real-estate-listings","property-manager",window.PropertyManager.propertyDataManager.propertyDetails),console.log("Registered updated property data with dashboard registry"));const a=window.PluginRegistry.getPluginData("real-estate-listings","settings");a&&"function"==typeof a.onSaveHandler&&a.onSaveHandler(e)}}),console.log("Real Estate Listings settings schema registered successfully with wizard integration")):console.error("PluginRegistry not found - Real Estate Listings settings schema could not be registered"),window.resetWizard=function(){resetWizardState("real-estate-setup-wizard"),localStorage.removeItem("disable_wizard"),console.log("Wizard state reset. Refresh the page to see the wizard."),setTimeout((()=>{location.reload()}),1e3)},window.disableWizard=function(){localStorage.setItem("disable_wizard","true"),console.log("Wizard disabled. Refresh the page to see regular settings."),setTimeout((()=>{location.reload()}),1e3)},window.enableWizard=function(){localStorage.removeItem("disable_wizard"),console.log("Wizard enabled. Refresh the page to see the wizard if it should be shown."),setTimeout((()=>{location.reload()}),1e3)},window.getWizardStatus=function(){const e=document.querySelector(".dashboard-wrapper, body"),t=e&&"false"===e.getAttribute("data-wizard-enabled"),a="true"===localStorage.getItem("disable_wizard"),r="true"===localStorage.getItem("real-estate-setup-wizard_completed");return console.log({"Wizard Globally Disabled":t,"Wizard Locally Disabled":a,"Wizard Completed":r,"Will Show Wizard":!t&&!a&&!r}),{globallyDisabled:t,locallyDisabled:a,completed:r,willShow:!t&&!a&&!r}},window.toggleGlobalWizard=function(e){const t=document.querySelector(".dashboard-wrapper, body");t?(t.setAttribute("data-wizard-enabled",e?"true":"false"),console.log(`Wizards globally ${e?"enabled":"disabled"}. Refresh the page to see changes.`)):console.error("Dashboard element not found. Cannot toggle wizard setting.")},window.manualInitPropertyManager=function(){if(window.PropertyManager&&"function"==typeof window.PropertyManager.initialize){const e=document.querySelector('.custom-component-container[data-component-id="property-manager"]');if(e)return window.PropertyManager.initialize(e.id),!0}return!1}}();